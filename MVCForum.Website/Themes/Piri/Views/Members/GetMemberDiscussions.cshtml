@using MVCForum.Website.ViewModels
@model ViewMemberDiscussionsViewModel

@foreach (var topic in Model.Topics)
{
    // Get the permissions for this topic via its parent category
    var permissions = Model.AllPermissionSets[topic.Category];

    var viewModel = new ViewTopicViewModel { Permissions = permissions, Topic = topic, User = Model.CurrentUser, ShowCategoryName = false };
    Html.RenderPartial("_TopicSlim", viewModel);    
}